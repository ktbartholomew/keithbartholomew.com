!function(t){function e(i){if(s[i])return s[i].exports;var r=s[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var s={};return e.m=t,e.c=s,e.p="",e(0)}([function(t,e,s){s(1);var i=s(12),r=s(17);r(),i.exec("/bin/cat","/etc/motd"),i.exec("/bin/sh")},function(t,e,s){var i=s(2),r=s(3),o=new i({cursorBlink:!0,debug:!0,visualBell:!0});o.open(document.getElementById("terminal"));var n=function(){var t=Math.floor(window.innerWidth/o.charMeasureElement.getBoundingClientRect().width)-1,e=Math.floor(window.innerHeight/o.charMeasureElement.getBoundingClientRect().height);o.resize(t,e)};window.addEventListener("resize",n),n(),o.focus(),r.enabled=!0,t.exports=o},function(t,e,s){var i,i;!function(e){t.exports=e()}(function(){var t;return function t(e,s,r){function o(a,h){if(!s[a]){if(!e[a]){var c="function"==typeof i&&i;if(!h&&c)return i(a,!0);if(n)return n(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=s[a]={exports:{}};e[a][0].call(u.exports,function(t){var s=e[a][1][t];return o(s?s:t)},u,u.exports,t,e,s,r)}return s[a].exports}for(var n="function"==typeof i&&i,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(t,e,s){/**
	 * @license MIT
	 */
"use strict";var i=function(){function t(t,e,s){this.textarea=t,this.compositionView=e,this.terminal=s,this.isComposing=!1,this.isSendingComposition=!1,this.compositionPosition={start:null,end:null}}return t.prototype.compositionstart=function(){this.isComposing=!0,this.compositionPosition.start=this.textarea.value.length,this.compositionView.textContent="",this.compositionView.classList.add("active")},t.prototype.compositionupdate=function(t){this.compositionView.textContent=t.data,this.updateCompositionElements();var e=this;setTimeout(function(){e.compositionPosition.end=e.textarea.value.length},0)},t.prototype.compositionend=function(){this.finalizeComposition(!0)},t.prototype.keydown=function(t){if(this.isComposing||this.isSendingComposition){if(229===t.keyCode)return!1;if(16===t.keyCode||17===t.keyCode||18===t.keyCode)return!1;this.finalizeComposition(!1)}return 229!==t.keyCode||(this.handleAnyTextareaChanges(),!1)},t.prototype.finalizeComposition=function(t){if(this.compositionView.classList.remove("active"),this.isComposing=!1,this.clearTextareaPosition(),t){var e={start:this.compositionPosition.start,end:this.compositionPosition.end},s=this;this.isSendingComposition=!0,setTimeout(function(){if(s.isSendingComposition){s.isSendingComposition=!1;var t;t=s.isComposing?s.textarea.value.substring(e.start,e.end):s.textarea.value.substring(e.start),s.terminal.handler(t)}},0)}else{this.isSendingComposition=!1;var i=this.textarea.value.substring(this.compositionPosition.start,this.compositionPosition.end);this.terminal.handler(i)}},t.prototype.handleAnyTextareaChanges=function(){var t=this.textarea.value,e=this;setTimeout(function(){if(!e.isComposing){var s=e.textarea.value,i=s.replace(t,"");i.length>0&&e.terminal.handler(i)}},0)},t.prototype.updateCompositionElements=function(t){if(this.isComposing){var e=this.terminal.element.querySelector(".terminal-cursor");if(e){var s=this.terminal.element.querySelector(".xterm-rows"),i=s.offsetTop+e.offsetTop;this.compositionView.style.left=e.offsetLeft+"px",this.compositionView.style.top=i+"px",this.compositionView.style.height=e.offsetHeight+"px",this.compositionView.style.lineHeight=e.offsetHeight+"px";var r=this.compositionView.getBoundingClientRect();this.textarea.style.left=e.offsetLeft+"px",this.textarea.style.top=i+"px",this.textarea.style.width=r.width+"px",this.textarea.style.height=r.height+"px",this.textarea.style.lineHeight=r.height+"px"}t||setTimeout(this.updateCompositionElements.bind(this,!0),0)}},t.prototype.clearTextareaPosition=function(){this.textarea.style.left="",this.textarea.style.top=""},t}();s.CompositionHelper=i},{}],2:[function(t,e,s){/**
	 * @license MIT
	 */
"use strict";function i(){this._events=this._events||{}}s.EventEmitter=i,i.prototype.addListener=function(t,e){this._events[t]=this._events[t]||[],this._events[t].push(e)},i.prototype.on=i.prototype.addListener,i.prototype.removeListener=function(t,e){if(this._events[t])for(var s=this._events[t],i=s.length;i--;)if(s[i]===e||s[i].listener===e)return void s.splice(i,1)},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(t){this._events[t]&&delete this._events[t]},i.prototype.once=function(t,e){function s(){var i=Array.prototype.slice.call(arguments);return this.removeListener(t,s),e.apply(this,i)}return s.listener=e,this.on(t,s)},i.prototype.emit=function(t){if(this._events[t])for(var e=Array.prototype.slice.call(arguments,1),s=this._events[t],i=s.length,r=0;r<i;r++)s[r].apply(this,e)},i.prototype.listeners=function(t){return this._events[t]=this._events[t]||[]}},{}],3:[function(t,e,s){/**
	 * @license MIT
	 */
"use strict";var i=function(){function t(t,e,s,i){this.terminal=t,this.viewportElement=e,this.scrollArea=s,this.charMeasureElement=i,this.currentRowHeight=0,this.lastRecordedBufferLength=0,this.lastRecordedViewportHeight=0,this.terminal.on("scroll",this.syncScrollArea.bind(this)),this.terminal.on("resize",this.syncScrollArea.bind(this)),this.viewportElement.addEventListener("scroll",this.onScroll.bind(this)),this.syncScrollArea()}return t.prototype.refresh=function(t){var e=t||this.charMeasureElement.getBoundingClientRect();if(e.height>0){var s=e.height!==this.currentRowHeight;s&&(this.currentRowHeight=e.height,this.viewportElement.style.lineHeight=e.height+"px",this.terminal.rowContainer.style.lineHeight=e.height+"px");var i=this.lastRecordedViewportHeight!==this.terminal.rows;(s||i)&&(this.lastRecordedViewportHeight=this.terminal.rows,this.viewportElement.style.height=e.height*this.terminal.rows+"px"),this.scrollArea.style.height=e.height*this.lastRecordedBufferLength+"px"}},t.prototype.syncScrollArea=function(){if(this.lastRecordedBufferLength!==this.terminal.lines.length)this.lastRecordedBufferLength=this.terminal.lines.length,this.refresh();else if(this.lastRecordedViewportHeight!==this.terminal.rows)this.refresh();else{var t=this.charMeasureElement.getBoundingClientRect();t.height!==this.currentRowHeight&&this.refresh(t)}var e=this.terminal.ydisp*this.currentRowHeight;this.viewportElement.scrollTop!==e&&(this.viewportElement.scrollTop=e)},t.prototype.onScroll=function(t){var e=Math.round(this.viewportElement.scrollTop/this.currentRowHeight),s=e-this.terminal.ydisp;this.terminal.scrollDisp(s,!0)},t.prototype.onWheel=function(t){if(0!==t.deltaY){var e=1;t.deltaMode===WheelEvent.DOM_DELTA_LINE?e=this.currentRowHeight:t.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(e=this.currentRowHeight*this.terminal.rows),this.viewportElement.scrollTop+=t.deltaY*e,t.preventDefault()}},t}();s.Viewport=i},{}],4:[function(t,e,s){/**
	 * Clipboard handler module: exports methods for handling all clipboard-related events in the
	 * terminal.
	 * @module xterm/handlers/Clipboard
	 * @license MIT
	 */
"use strict";function i(t){var e=String.fromCharCode(32),s=String.fromCharCode(160),i=new RegExp(s,"g"),r=t.split("\n").map(function(t){var s=t.replace(/\s+$/g,"").replace(i,e);return s}).join("\n");return r}function r(t,e){var s=window.getSelection().toString(),r=i(s);e.browser.isMSIE?window.clipboardData.setData("Text",r):t.clipboardData.setData("text/plain",r),t.preventDefault()}function o(t,e){t.stopPropagation();var s,i=function(s){return e.handler(s),e.textarea.value="",e.cancel(t)};e.browser.isMSIE?window.clipboardData&&(s=window.clipboardData.getData("Text"),i(s)):t.clipboardData&&(s=t.clipboardData.getData("text/plain"),i(s))}function n(t,e){var s=document.getSelection(),r=i(s.toString()),o=!1,n=t.clientX,a=t.clientY;if(s.rangeCount){var h=s.getRangeAt(0),c=h.getClientRects(),l=void 0,u=void 0;for(l=0;l<c.length&&(u=c[l],!(o=n>u.left&&n<u.right&&a>u.top&&a<u.bottom));l++);!r.match(/^\s$/)&&r.length||(o=!1)}o||(e.textarea.style.position="fixed",e.textarea.style.width="20px",e.textarea.style.height="20px",e.textarea.style.left=n-10+"px",e.textarea.style.top=a-10+"px",e.textarea.style.zIndex="1000",e.textarea.focus(),setTimeout(function(){e.textarea.style.position=null,e.textarea.style.width=null,e.textarea.style.height=null,e.textarea.style.left=null,e.textarea.style.top=null,e.textarea.style.zIndex=null},4))}s.prepareTextForClipboard=i,s.copyHandler=r,s.pasteHandler=o,s.rightClickHandler=n},{}],5:[function(t,e,s){/**
	 * Attributes and methods to help with identifying the current browser and platform.
	 * @module xterm/utils/Browser
	 * @license MIT
	 */
"use strict";var i=t("./Generic.js"),r="undefined"==typeof navigator,o=r?"node":navigator.userAgent,n=r?"node":navigator.platform;s.isFirefox=!!~o.indexOf("Firefox"),s.isMSIE=!!~o.indexOf("MSIE")||!!~o.indexOf("Trident"),s.isMac=i.contains(["Macintosh","MacIntel","MacPPC","Mac68K"],n),s.isIpad="iPad"===n,s.isIphone="iPhone"===n,s.isMSWindows=i.contains(["Windows","Win16","Win32","WinCE"],n)},{"./Generic.js":6}],6:[function(t,e,s){/**
	 * Generic utilities module with methods that can be helpful at different parts of the code base.
	 * @module xterm/utils/Generic
	 * @license MIT
	 */
"use strict";s.contains=function(t,e){return t.indexOf(e)>=0}},{}],7:[function(e,s,i){/**
	 * xterm.js: xterm, in the browser
	 * Originally forked from (with the author's permission):
	 *   Fabrice Bellard's javascript vt100 for jslinux:
	 *   http://bellard.org/jslinux/
	 *   Copyright (c) 2011 Fabrice Bellard
	 *   The original design remains. The terminal itself
	 *   has been extended to include xterm CSI codes, among
	 *   other features.
	 * @license MIT
	 */
"use strict";function r(t){var e=this;if(!(this instanceof r))return new r(arguments[0],arguments[1],arguments[2]);e.browser=v,e.cancel=r.cancel,y.EventEmitter.call(this),"number"==typeof t&&(t={cols:arguments[0],rows:arguments[1],handler:arguments[2]}),t=t||{},Object.keys(r.defaults).forEach(function(s){null==t[s]&&(t[s]=r.options[s],r[s]!==r.defaults[s]&&(t[s]=r[s])),e[s]=t[s]}),8===t.colors.length?t.colors=t.colors.concat(r._colors.slice(8)):16===t.colors.length?t.colors=t.colors.concat(r._colors.slice(16)):10===t.colors.length?t.colors=t.colors.slice(0,-2).concat(r._colors.slice(8,-2),t.colors.slice(-2)):18===t.colors.length&&(t.colors=t.colors.concat(r._colors.slice(16,-2),t.colors.slice(-2))),this.colors=t.colors,this.options=t,this.parent=t.body||t.parent||(w?w.getElementsByTagName("body")[0]:null),this.cols=t.cols||t.geometry[0],this.rows=t.rows||t.geometry[1],this.geometry=[this.cols,this.rows],t.handler&&this.on("data",t.handler),this.ybase=0,this.ydisp=0,this.x=0,this.y=0,this.isRefreshing=!1,this.cursorState=0,this.cursorHidden=!1,this.convertEol,this.state=0,this.queue="",this.scrollTop=0,this.scrollBottom=this.rows-1,this.customKeydownHandler=null,this.applicationKeypad=!1,this.applicationCursor=!1,this.originMode=!1,this.insertMode=!1,this.wraparoundMode=!0,this.normal=null,this.charset=null,this.gcharset=null,this.glevel=0,this.charsets=[null],this.decLocator,this.x10Mouse,this.vt200Mouse,this.vt300Mouse,this.normalMouse,this.mouseEvents,this.sendFocus,this.utfMouse,this.sgrMouse,this.urxvtMouse,this.element,this.children,this.refreshStart,this.refreshEnd,this.savedX,this.savedY,this.savedCols,this.readable=!0,this.writable=!0,this.defAttr=131840,this.curAttr=this.defAttr,this.params=[],this.currentParam=0,this.prefix="",this.postfix="",this.surrogate_high="",this.lines=[];for(var s=this.rows;s--;)this.lines.push(this.blankLine());this.tabs,this.setupStops(),this.userScrolling=!1}function o(t,e,s,i){Array.isArray(t)||(t=[t]),t.forEach(function(t){t.addEventListener(e,s,i||!1)})}function n(t,e,s,i){t.removeEventListener(e,s,i||!1)}function a(t,e){if(this.cancelEvents||e)return t.preventDefault(),t.stopPropagation(),!1}function h(t,e){function s(){this.constructor=t}s.prototype=e.prototype,t.prototype=new s}function c(t){var e=t.getElementsByTagName("body")[0],s=t.createElement("span");s.innerHTML="hello world",e.appendChild(s);var i=s.scrollWidth;s.style.fontWeight="bold";var r=s.scrollWidth;return e.removeChild(s),i!==r}function l(t,e){var s=t.browser.isMac&&e.altKey&&!e.ctrlKey&&!e.metaKey||t.browser.isMSWindows&&e.altKey&&e.ctrlKey&&!e.metaKey;return"keypress"==e.type?s:s&&(!e.keyCode||e.keyCode>47)}function u(t,e,s){var i=t<<16|e<<8|s;if(null!=u._cache[i])return u._cache[i];for(var o,n,a,h,c,l=1/0,p=-1,f=0;f<r.vcolors.length;f++){if(o=r.vcolors[f],n=o[0],a=o[1],h=o[2],c=u.distance(t,e,s,n,a,h),0===c){p=f;break}c<l&&(l=c,p=f)}return u._cache[i]=p}function p(t,e,s){if(t.forEach)return t.forEach(e,s);for(var i=0;i<t.length;i++)e.call(s,t[i],i,t)}function f(t){if(Object.keys)return Object.keys(t);var e,s=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&s.push(e);return s}var d=e("./CompositionHelper.js"),y=e("./EventEmitter.js"),m=e("./Viewport.js"),b=e("./handlers/Clipboard.js"),v=e("./utils/Browser"),w="undefined"!=typeof window?window.document:null,g=0,k=1,x=2,C=3,E=4,S=5,A=6;h(r,y.EventEmitter),r.prototype.eraseAttr=function(){return this.defAttr&-512|511&this.curAttr},r.tangoColors=["#2e3436","#cc0000","#4e9a06","#c4a000","#3465a4","#75507b","#06989a","#d3d7cf","#555753","#ef2929","#8ae234","#fce94f","#729fcf","#ad7fa8","#34e2e2","#eeeeec"],r.colors=function(){function t(t,s,r){i.push("#"+e(t)+e(s)+e(r))}function e(t){return t=t.toString(16),t.length<2?"0"+t:t}var s,i=r.tangoColors.slice(),o=[0,95,135,175,215,255];for(s=0;s<216;s++)t(o[s/36%6|0],o[s/6%6|0],o[s%6]);for(s=0;s<24;s++)o=8+10*s,t(o,o,o);return i}(),r._colors=r.colors.slice(),r.vcolors=function(){for(var t,e=[],s=r.colors,i=0;i<256;i++)t=parseInt(s[i].substring(1),16),e.push([t>>16&255,t>>8&255,255&t]);return e}(),r.defaults={colors:r.colors,theme:"default",convertEol:!1,termName:"xterm",geometry:[80,24],cursorBlink:!1,visualBell:!1,popOnBell:!1,scrollback:1e3,screenKeys:!1,debug:!1,cancelEvents:!1},r.options={},r.focus=null,p(f(r.defaults),function(t){r[t]=r.defaults[t],r.options[t]=r.defaults[t]}),r.prototype.focus=function(){return this.textarea.focus()},r.prototype.getOption=function(t,e){if(!(t in r.defaults))throw new Error('No option with key "'+t+'"');return"undefined"!=typeof this.options[t]?this.options[t]:this[t]},r.prototype.setOption=function(t,e){if(!(t in r.defaults))throw new Error('No option with key "'+t+'"');this[t]=e,this.options[t]=e},r.bindFocus=function(t){o(t.textarea,"focus",function(e){t.sendFocus&&t.send("[I"),t.element.classList.add("focus"),t.showCursor(),r.focus=t,t.emit("focus",{terminal:t})})},r.prototype.blur=function(){return this.textarea.blur()},r.bindBlur=function(t){o(t.textarea,"blur",function(e){t.refresh(t.y,t.y),t.sendFocus&&t.send("[O"),t.element.classList.remove("focus"),r.focus=null,t.emit("blur",{terminal:t})})},r.prototype.initGlobal=function(){function t(t){b.rightClickHandler.call(this,t,e)}var e=this;r.bindKeys(this),r.bindFocus(this),r.bindBlur(this),o(this.element,"copy",function(t){b.copyHandler.call(this,t,e)}),o(this.textarea,"paste",function(t){b.pasteHandler.call(this,t,e)}),e.browser.isFirefox?o(this.element,"mousedown",function(e){2==e.button&&t(e)}):o(this.element,"contextmenu",t)},r.bindKeys=function(t){o(t.element,"keydown",function(e){w.activeElement==this&&t.keyDown(e)},!0),o(t.element,"keypress",function(e){w.activeElement==this&&t.keyPress(e)},!0),o(t.element,"keyup",t.focus.bind(t)),o(t.textarea,"keydown",function(e){t.keyDown(e)},!0),o(t.textarea,"keypress",function(e){t.keyPress(e),this.value=""},!0),o(t.textarea,"compositionstart",t.compositionHelper.compositionstart.bind(t.compositionHelper)),o(t.textarea,"compositionupdate",t.compositionHelper.compositionupdate.bind(t.compositionHelper)),o(t.textarea,"compositionend",t.compositionHelper.compositionend.bind(t.compositionHelper)),t.on("refresh",t.compositionHelper.updateCompositionElements.bind(t.compositionHelper))},r.prototype.insertRow=function(t){return"object"!=typeof t&&(t=w.createElement("div")),this.rowContainer.appendChild(t),this.children.push(t),t},r.prototype.open=function(t){var e=this,s=0;if(this.parent=t||this.parent,!this.parent)throw new Error("Terminal requires a parent element.");for(this.context=this.parent.ownerDocument.defaultView,this.document=this.parent.ownerDocument,this.body=this.document.getElementsByTagName("body")[0],this.element=this.document.createElement("div"),this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.classList.add("xterm-theme-"+this.theme),this.element.style.height,this.element.setAttribute("tabindex",0),this.viewportElement=w.createElement("div"),this.viewportElement.classList.add("xterm-viewport"),this.element.appendChild(this.viewportElement),this.viewportScrollArea=w.createElement("div"),this.viewportScrollArea.classList.add("xterm-scroll-area"),this.viewportElement.appendChild(this.viewportScrollArea),this.rowContainer=w.createElement("div"),this.rowContainer.classList.add("xterm-rows"),this.element.appendChild(this.rowContainer),this.children=[],this.helperContainer=w.createElement("div"),this.helperContainer.classList.add("xterm-helpers"),this.element.appendChild(this.helperContainer),this.textarea=w.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this.textarea.addEventListener("focus",function(){e.emit("focus",{terminal:e})}),this.textarea.addEventListener("blur",function(){e.emit("blur",{terminal:e})}),this.helperContainer.appendChild(this.textarea),this.compositionView=w.createElement("div"),this.compositionView.classList.add("composition-view"),this.compositionHelper=new d.CompositionHelper(this.textarea,this.compositionView,this),this.helperContainer.appendChild(this.compositionView),this.charMeasureElement=w.createElement("div"),this.charMeasureElement.classList.add("xterm-char-measure-element"),this.charMeasureElement.innerHTML="W",this.helperContainer.appendChild(this.charMeasureElement);s<this.rows;s++)this.insertRow();this.parent.appendChild(this.element),this.viewport=new m.Viewport(this,this.viewportElement,this.viewportScrollArea,this.charMeasureElement),this.refresh(0,this.rows-1),this.initGlobal(),this.focus(),o(this.element,"click",function(){var t=w.getSelection(),s=t.isCollapsed,i="boolean"==typeof s?!s:"Range"==t.type;i||e.focus()}),this.bindMouse(),null==r.brokenBold&&(r.brokenBold=c(this.document)),this.emit("open")},r.loadAddon=function(r,o){return"object"==typeof i&&"object"==typeof s?e("./addons/"+r+"/"+r):"function"==typeof t?e(["./addons/"+r+"/"+r],o):(console.error("Cannot load a module without a CommonJS or RequireJS environment."),!1)},r.prototype.bindMouse=function(){function t(t){var e,s;if(e=r(t),s=a(t))switch(i(e,s),t.overrideType||t.type){case"mousedown":l=e;break;case"mouseup":l=32;break;case"wheel":}}function e(t){var e,s=l;e=a(t),e&&(s+=32,i(s,e))}function s(t,e){if(c.utfMouse){if(2047===e)return t.push(0);e<127?t.push(e):(e>2047&&(e=2047),t.push(192|e>>6),t.push(128|63&e))}else{if(255===e)return t.push(0);e>127&&(e=127),t.push(e)}}function i(t,e){if(c.vt300Mouse){t&=3,e.x-=32,e.y-=32;var i="[24";if(0===t)i+="1";else if(1===t)i+="3";else if(2===t)i+="5";else{if(3===t)return;i+="0"}return i+="~["+e.x+","+e.y+"]\r",void c.send(i)}if(c.decLocator)return t&=3,e.x-=32,e.y-=32,0===t?t=2:1===t?t=4:2===t?t=6:3===t&&(t=3),void c.send("["+t+";"+(3===t?4:0)+";"+e.y+";"+e.x+";"+(e.page||0)+"&w");if(c.urxvtMouse)return e.x-=32,e.y-=32,e.x++,e.y++,void c.send("["+t+";"+e.x+";"+e.y+"M");if(c.sgrMouse)return e.x-=32,e.y-=32,void c.send("[<"+(3===(3&t)?t&-4:t)+";"+e.x+";"+e.y+(3===(3&t)?"m":"M"));var i=[];s(i,t),s(i,e.x),s(i,e.y),c.send("[M"+String.fromCharCode.apply(String,i))}function r(t){var e,s,i,r,o;switch(t.overrideType||t.type){case"mousedown":e=null!=t.button?+t.button:null!=t.which?t.which-1:null,c.browser.isMSIE&&(e=1===e?0:4===e?1:e);break;case"mouseup":e=3;break;case"DOMMouseScroll":e=t.detail<0?64:65;break;case"wheel":e=t.wheelDeltaY>0?64:65}return s=t.shiftKey?4:0,i=t.metaKey?8:0,r=t.ctrlKey?16:0,o=s|i|r,c.vt200Mouse?o&=r:c.normalMouse||(o=0),e=32+(o<<2)+e}function a(t){var e,s,i,r,o;if(null!=t.pageX){for(e=t.pageX,s=t.pageY,o=c.element;o&&o!==c.document.documentElement;)e-=o.offsetLeft,s-=o.offsetTop,o="offsetParent"in o?o.offsetParent:o.parentNode;return i=c.element.clientWidth,r=c.element.clientHeight,e=Math.ceil(e/i*c.cols),s=Math.ceil(s/r*c.rows),e<0&&(e=0),e>c.cols&&(e=c.cols),s<0&&(s=0),s>c.rows&&(s=c.rows),e+=32,s+=32,{x:e,y:s,type:"wheel"}}}var h=this.element,c=this,l=32;o(h,"mousedown",function(s){if(c.mouseEvents)return t(s),c.focus(),c.vt200Mouse?(s.overrideType="mouseup",t(s),c.cancel(s)):(c.normalMouse&&o(c.document,"mousemove",e),c.x10Mouse||o(c.document,"mouseup",function s(i){return t(i),c.normalMouse&&n(c.document,"mousemove",e),n(c.document,"mouseup",s),c.cancel(i)}),c.cancel(s))}),o(h,"wheel",function(e){if(c.mouseEvents&&!(c.x10Mouse||c.vt300Mouse||c.decLocator))return t(e),c.cancel(e)}),o(h,"wheel",function(t){if(!c.mouseEvents)return c.viewport.onWheel(t),c.cancel(t)})},r.prototype.destroy=function(){this.readable=!1,this.writable=!1,this._events={},this.handler=function(){},this.write=function(){},this.element.parentNode&&this.element.parentNode.removeChild(this.element)},r.flags={BOLD:1,UNDERLINE:2,BLINK:4,INVERSE:8,INVISIBLE:16},r.prototype.refresh=function(t,e,s){var i=this;if(s="undefined"==typeof s||s)return void(this._refreshIsQueued?this._fullRefreshNext=!0:(setTimeout(function(){i.refresh(t,e,!1)},34),this._refreshIsQueued=!0));this._refreshIsQueued=!1,this._fullRefreshNext&&(t=0,e=this.rows-1,this._fullRefreshNext=!1);var o,n,a,h,c,l,u,p,f,d,y,m,b,v,g;w.activeElement;for(e-t>=this.rows/2&&(g=this.element.parentNode,g&&this.element.removeChild(this.rowContainer)),p=this.cols,n=t,e>=this.rows.length&&(this.log("`end` is too large. Most likely a bad CSR."),e=this.rows.length-1);n<=e;n++){for(v=n+this.ydisp,h=this.lines[v],c="",o=this.y===n-(this.ybase-this.ydisp)&&this.cursorState&&!this.cursorHidden?this.x:-1,d=this.defAttr,a=0;a<p;a++)if(f=h[a][0],l=h[a][1],u=h[a][2]){if(a===o&&(f=-1),f!==d&&(d!==this.defAttr&&(c+="</span>"),f!==this.defAttr))if(f===-1)c+='<span class="reverse-video terminal-cursor',this.cursorBlink&&(c+=" blinking"),c+='">';else{var k=[];y=511&f,m=f>>9&511,b=f>>18,b&r.flags.BOLD&&(r.brokenBold||k.push("xterm-bold"),m<8&&(m+=8)),b&r.flags.UNDERLINE&&k.push("xterm-underline"),b&r.flags.BLINK&&k.push("xterm-blink"),b&r.flags.INVERSE&&(y=[m,m=y][0],1&b&&m<8&&(m+=8)),b&r.flags.INVISIBLE&&k.push("xterm-hidden"),b&r.flags.INVERSE&&(257==y&&(y=15),256==m&&(m=0)),y<256&&k.push("xterm-bg-color-"+y),m<256&&k.push("xterm-color-"+m),c+="<span",k.length&&(c+=' class="'+k.join(" ")+'"'),c+=">"}switch(l){case"&":c+="&amp;";break;case"<":c+="&lt;";break;case">":c+="&gt;";break;default:c+=l<=" "?"&nbsp;":l}d=f}d!==this.defAttr&&(c+="</span>"),this.children[n].innerHTML=c}g&&this.element.appendChild(this.rowContainer),this.emit("refresh",{element:this.element,start:t,end:e})},r.prototype.showCursor=function(){this.cursorState||(this.cursorState=1,this.refresh(this.y,this.y))},r.prototype.scroll=function(){var t;++this.ybase===this.scrollback&&(this.ybase=this.ybase/2|0,this.lines=this.lines.slice(-(this.ybase+this.rows)+1)),this.userScrolling||(this.ydisp=this.ybase),t=this.ybase+this.rows-1,t-=this.rows-1-this.scrollBottom,t===this.lines.length?this.lines.push(this.blankLine()):this.lines.splice(t,0,this.blankLine()),0!==this.scrollTop&&(0!==this.ybase&&(this.ybase--,this.userScrolling||(this.ydisp=this.ybase)),this.lines.splice(this.ybase+this.scrollTop,1)),this.updateRange(this.scrollTop),this.updateRange(this.scrollBottom),this.emit("scroll",this.ydisp)},r.prototype.scrollDisp=function(t,e){t<0?this.userScrolling=!0:t+this.ydisp>=this.ybase&&(this.userScrolling=!1),this.ydisp+=t,this.ydisp>this.ybase?this.ydisp=this.ybase:this.ydisp<0&&(this.ydisp=0),e||this.emit("scroll",this.ydisp),this.refresh(0,this.rows-1)},r.prototype.scrollPages=function(t){this.scrollDisp(t*(this.rows-1))},r.prototype.scrollToTop=function(){this.scrollDisp(-this.ydisp)},r.prototype.scrollToBottom=function(){this.scrollDisp(this.ybase-this.ydisp)},r.prototype.write=function(t){var e,s,i,o,n,a,h=t.length,c=0;for(this.refreshStart=this.y,this.refreshEnd=this.y,this.surrogate_high&&(t=this.surrogate_high+t,this.surrogate_high="");c<h;c++){if(s=t[c],i=t.charCodeAt(c),55296<=i&&i<=56319){if(o=t.charCodeAt(c+1),isNaN(o)){this.surrogate_high=s;continue}i=1024*(i-55296)+(o-56320)+65536,s+=t.charAt(c+1)}if(!(56320<=i&&i<=57343))switch(this.state){case g:switch(s){case"":this.bell();break;case"\n":case"\v":case"\f":this.convertEol&&(this.x=0),this.y++,this.y>this.scrollBottom&&(this.y--,this.scroll());break;case"\r":this.x=0;break;case"\b":this.x>0&&this.x--;break;case"\t":this.x=this.nextStop();break;case"":this.setgLevel(1);break;case"":this.setgLevel(0);break;case"":this.state=k;break;default:if(n=M(i),s>=" "){if(this.charset&&this.charset[s]&&(s=this.charset[s]),a=this.y+this.ybase,!n&&this.x){this.lines[a][this.x-1]&&(this.lines[a][this.x-1][2]?this.lines[a][this.x-1][1]+=s:this.lines[a][this.x-2]&&(this.lines[a][this.x-2][1]+=s),this.updateRange(this.y));break}if(this.x+n-1>=this.cols)if(this.wraparoundMode)this.x=0,this.y++,this.y>this.scrollBottom&&(this.y--,this.scroll());else if(this.x=this.cols-1,2===n)continue;if(a=this.y+this.ybase,this.insertMode)for(var l=0;l<n;++l){var u=this.lines[this.y+this.ybase].pop();0===u[2]&&this.lines[a][this.cols-2]&&2===this.lines[a][this.cols-2][2]&&(this.lines[a][this.cols-2]=[this.curAttr," ",1]),this.lines[a].splice(this.x,0,[this.curAttr," ",1])}this.lines[a][this.x]=[this.curAttr,s,n],this.x++,this.updateRange(this.y),2===n&&(this.lines[a][this.x]=[this.curAttr,"",0],this.x++)}}break;case k:switch(s){case"[":this.params=[],this.currentParam=0,this.state=x;break;case"]":this.params=[],this.currentParam=0,this.state=C;break;case"P":this.params=[],this.currentParam=0,this.state=S;break;case"_":this.state=A;break;case"^":this.state=A;break;case"c":this.reset();break;case"E":this.x=0;case"D":this.index();break;case"M":this.reverseIndex();break;case"%":this.setgLevel(0),this.setgCharset(0,r.charsets.US),this.state=g,c++;break;case"(":case")":case"*":case"+":case"-":case".":switch(s){case"(":this.gcharset=0;break;case")":this.gcharset=1;break;case"*":this.gcharset=2;break;case"+":this.gcharset=3;break;case"-":this.gcharset=1;break;case".":this.gcharset=2}this.state=E;break;case"/":this.gcharset=3,this.state=E,c--;break;case"N":break;case"O":break;case"n":this.setgLevel(2);break;case"o":this.setgLevel(3);break;case"|":this.setgLevel(3);break;case"}":this.setgLevel(2);break;case"~":this.setgLevel(1);break;case"7":this.saveCursor(),this.state=g;break;case"8":this.restoreCursor(),this.state=g;break;case"#":this.state=g,c++;break;case"H":this.tabSet();break;case"=":this.log("Serial port requested application keypad."),this.applicationKeypad=!0,this.viewport.syncScrollArea(),this.state=g;break;case">":this.log("Switching back to normal keypad."),this.applicationKeypad=!1,this.viewport.syncScrollArea(),this.state=g;break;default:this.state=g,this.error("Unknown ESC control: %s.",s)}break;case E:switch(s){case"0":e=r.charsets.SCLD;break;case"A":e=r.charsets.UK;break;case"B":e=r.charsets.US;break;case"4":e=r.charsets.Dutch;break;case"C":case"5":e=r.charsets.Finnish;break;case"R":e=r.charsets.French;break;case"Q":e=r.charsets.FrenchCanadian;break;case"K":e=r.charsets.German;break;case"Y":e=r.charsets.Italian;break;case"E":case"6":e=r.charsets.NorwegianDanish;break;case"Z":e=r.charsets.Spanish;break;case"H":case"7":e=r.charsets.Swedish;break;case"=":e=r.charsets.Swiss;break;case"/":e=r.charsets.ISOLatin,c++;break;default:e=r.charsets.US}this.setgCharset(this.gcharset,e),this.gcharset=null,this.state=g;break;case C:if(""===s||""===s){switch(""===s&&c++,this.params.push(this.currentParam),this.params[0]){case 0:case 1:case 2:this.params[1]&&(this.title=this.params[1],this.handleTitle(this.title));break;case 3:break;case 4:case 5:break;case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:break;case 46:break;case 50:break;case 51:break;case 52:break;case 104:case 105:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:}this.params=[],this.currentParam=0,this.state=g}else this.params.length?this.currentParam+=s:s>="0"&&s<="9"?this.currentParam=10*this.currentParam+s.charCodeAt(0)-48:";"===s&&(this.params.push(this.currentParam),this.currentParam="");break;case x:if("?"===s||">"===s||"!"===s){this.prefix=s;break}if(s>="0"&&s<="9"){this.currentParam=10*this.currentParam+s.charCodeAt(0)-48;break}if("$"===s||'"'===s||" "===s||"'"===s){this.postfix=s;break}if(this.params.push(this.currentParam),this.currentParam=0,";"===s)break;switch(this.state=g,s){case"A":this.cursorUp(this.params);break;case"B":this.cursorDown(this.params);break;case"C":this.cursorForward(this.params);break;case"D":this.cursorBackward(this.params);break;case"H":this.cursorPos(this.params);break;case"J":this.eraseInDisplay(this.params);break;case"K":this.eraseInLine(this.params);break;case"m":this.prefix||this.charAttributes(this.params);break;case"n":this.prefix||this.deviceStatus(this.params);break;case"@":this.insertChars(this.params);break;case"E":this.cursorNextLine(this.params);break;case"F":this.cursorPrecedingLine(this.params);break;case"G":this.cursorCharAbsolute(this.params);break;case"L":this.insertLines(this.params);break;case"M":this.deleteLines(this.params);break;case"P":this.deleteChars(this.params);break;case"X":this.eraseChars(this.params);break;case"`":this.charPosAbsolute(this.params);break;case"a":this.HPositionRelative(this.params);break;case"c":this.sendDeviceAttributes(this.params);break;case"d":this.linePosAbsolute(this.params);break;case"e":this.VPositionRelative(this.params);break;case"f":this.HVPosition(this.params);break;case"h":this.setMode(this.params);break;case"l":this.resetMode(this.params);break;case"r":this.setScrollRegion(this.params);break;case"s":this.saveCursor(this.params);break;case"u":this.restoreCursor(this.params);break;case"I":this.cursorForwardTab(this.params);break;case"S":this.scrollUp(this.params);break;case"T":this.params.length<2&&!this.prefix&&this.scrollDown(this.params);break;case"Z":this.cursorBackwardTab(this.params);break;case"b":this.repeatPrecedingCharacter(this.params);break;case"g":this.tabClear(this.params);break;case"p":switch(this.prefix){case"!":this.softReset(this.params)}break;default:this.error("Unknown CSI code: %s.",s)}this.prefix="",this.postfix="";break;case S:if(""===s||""===s){switch(""===s&&c++,this.prefix){case"":break;case"$q":var p=this.currentParam,f=!1;switch(p){case'"q':p='0"q';break;case'"p':p='61"p';break;case"r":p=""+(this.scrollTop+1)+";"+(this.scrollBottom+1)+"r";break;case"m":p="0m";break;default:this.error("Unknown DCS Pt: %s.",p),p=""}this.send("P"+ +f+"$r"+p+"\\");break;case"+p":break;case"+q":var p=this.currentParam,f=!1;this.send("P"+ +f+"+r"+p+"\\");break;default:this.error("Unknown DCS prefix: %s.",this.prefix)}this.currentParam=0,this.prefix="",this.state=g}else this.currentParam?this.currentParam+=s:this.prefix||"$"===s||"+"===s?2===this.prefix.length?this.currentParam=s:this.prefix+=s:this.currentParam=s;break;case A:""!==s&&""!==s||(""===s&&c++,this.state=g)}}this.updateRange(this.y),this.refresh(this.refreshStart,this.refreshEnd)},r.prototype.writeln=function(t){this.write(t+"\r\n")},r.prototype.attachCustomKeydownHandler=function(t){this.customKeydownHandler=t},r.prototype.keyDown=function(t){if(this.customKeydownHandler&&this.customKeydownHandler(t)===!1)return!1;if(!this.compositionHelper.keydown.bind(this.compositionHelper)(t))return this.ybase!==this.ydisp&&this.scrollToBottom(),!1;var e=this.evaluateKeyEscapeSequence(t);return e.scrollDisp?(this.scrollDisp(e.scrollDisp),this.cancel(t,!0)):!!l(this,t)||(e.cancel&&this.cancel(t,!0),!e.key||(this.emit("keydown",t),this.emit("key",e.key,t),this.showCursor(),this.handler(e.key),this.cancel(t,!0)))},r.prototype.evaluateKeyEscapeSequence=function(t){var e={cancel:!1,key:void 0,scrollDisp:void 0},s=t.shiftKey<<0|t.altKey<<1|t.ctrlKey<<2|t.metaKey<<3;switch(t.keyCode){case 8:if(t.shiftKey){e.key="\b";break}e.key="";break;case 9:if(t.shiftKey){e.key="[Z";break}e.key="\t",e.cancel=!0;break;case 13:e.key="\r",e.cancel=!0;break;case 27:e.key="",e.cancel=!0;break;case 37:s?(e.key="[1;"+(s+1)+"D","[1;3D"==e.key&&(e.key="[1;5D")):this.applicationCursor?e.key="OD":e.key="[D";break;case 39:s?(e.key="[1;"+(s+1)+"C","[1;3C"==e.key&&(e.key="[1;5C")):this.applicationCursor?e.key="OC":e.key="[C";break;case 38:s?(e.key="[1;"+(s+1)+"A","[1;3A"==e.key&&(e.key="[1;5A")):this.applicationCursor?e.key="OA":e.key="[A";break;case 40:s?(e.key="[1;"+(s+1)+"B","[1;3B"==e.key&&(e.key="[1;5B")):this.applicationCursor?e.key="OB":e.key="[B";break;case 45:t.shiftKey||t.ctrlKey||(e.key="[2~");break;case 46:s?e.key="[3;"+(s+1)+"~":e.key="[3~";break;case 36:s?e.key="[1;"+(s+1)+"H":this.applicationCursor?e.key="OH":e.key="[H";break;case 35:s?e.key="[1;"+(s+1)+"F":this.applicationCursor?e.key="OF":e.key="[F";break;case 33:t.shiftKey?e.scrollDisp=-(this.rows-1):e.key="[5~";break;case 34:t.shiftKey?e.scrollDisp=this.rows-1:e.key="[6~";break;case 112:s?e.key="[1;"+(s+1)+"P":e.key="OP";break;case 113:s?e.key="[1;"+(s+1)+"Q":e.key="OQ";break;case 114:s?e.key="[1;"+(s+1)+"R":e.key="OR";break;case 115:s?e.key="[1;"+(s+1)+"S":e.key="OS";break;case 116:s?e.key="[15;"+(s+1)+"~":e.key="[15~";break;case 117:s?e.key="[17;"+(s+1)+"~":e.key="[17~";break;case 118:s?e.key="[18;"+(s+1)+"~":e.key="[18~";break;case 119:s?e.key="[19;"+(s+1)+"~":e.key="[19~";break;case 120:s?e.key="[20;"+(s+1)+"~":e.key="[20~";break;case 121:s?e.key="[21;"+(s+1)+"~":e.key="[21~";break;case 122:s?e.key="[23;"+(s+1)+"~":e.key="[23~";break;case 123:s?e.key="[24;"+(s+1)+"~":e.key="[24~";break;default:!t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?this.browser.isMac||!t.altKey||t.ctrlKey||t.metaKey||(t.keyCode>=65&&t.keyCode<=90?e.key=""+String.fromCharCode(t.keyCode+32):192===t.keyCode?e.key="`":t.keyCode>=48&&t.keyCode<=57&&(e.key=""+(t.keyCode-48))):t.keyCode>=65&&t.keyCode<=90?e.key=String.fromCharCode(t.keyCode-64):32===t.keyCode?e.key=String.fromCharCode(0):t.keyCode>=51&&t.keyCode<=55?e.key=String.fromCharCode(t.keyCode-51+27):56===t.keyCode?e.key=String.fromCharCode(127):219===t.keyCode?e.key=String.fromCharCode(27):220===t.keyCode?e.key=String.fromCharCode(28):221===t.keyCode&&(e.key=String.fromCharCode(29))}return e},r.prototype.setgLevel=function(t){this.glevel=t,this.charset=this.charsets[t]},r.prototype.setgCharset=function(t,e){this.charsets[t]=e,this.glevel===t&&(this.charset=e)},r.prototype.keyPress=function(t){var e;if(this.cancel(t),t.charCode)e=t.charCode;else if(null==t.which)e=t.keyCode;else{if(0===t.which||0===t.charCode)return!1;e=t.which}return!(!e||(t.altKey||t.ctrlKey||t.metaKey)&&!l(this,t))&&(e=String.fromCharCode(e),this.emit("keypress",e,t),this.emit("key",e,t),this.showCursor(),this.handler(e),!1)},r.prototype.send=function(t){var e=this;this.queue||setTimeout(function(){e.handler(e.queue),e.queue=""},1),this.queue+=t},r.prototype.bell=function(){if(this.visualBell){var t=this;this.element.style.borderColor="white",setTimeout(function(){t.element.style.borderColor=""},10),this.popOnBell&&this.focus()}},r.prototype.log=function(){if(this.debug&&this.context.console&&this.context.console.log){var t=Array.prototype.slice.call(arguments);this.context.console.log.apply(this.context.console,t)}},r.prototype.error=function(){if(this.debug&&this.context.console&&this.context.console.error){var t=Array.prototype.slice.call(arguments);this.context.console.error.apply(this.context.console,t)}},r.prototype.resize=function(t,e){var s,i,r,o,n;if(t!==this.cols||e!==this.rows){if(t<1&&(t=1),e<1&&(e=1),r=this.cols,r<t)for(o=[this.defAttr," ",1],i=this.lines.length;i--;)for(;this.lines[i].length<t;)this.lines[i].push(o);else for(i=this.lines.length;i--;)for(;this.lines[i].length>t;)this.lines[i].pop();if(this.setupStops(r),this.cols=t,r=this.rows,n=0,r<e)for(s=this.element;r++<e;)this.lines.length<e+this.ybase&&(this.ybase>0&&this.lines.length<=this.ybase+this.y+n+1?(this.ybase--,n++,this.ydisp>0&&this.ydisp--):this.lines.push(this.blankLine())),this.children.length<e&&this.insertRow();else for(;r-- >e;)if(this.lines.length>e+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++)),this.children.length>e){if(s=this.children.shift(),!s)continue;s.parentNode.removeChild(s)}this.rows=e,this.y>=e&&(this.y=e-1),n&&(this.y+=n),this.x>=t&&(this.x=t-1),this.scrollTop=0,this.scrollBottom=e-1,this.refresh(0,this.rows-1),this.normal=null,this.geometry=[this.cols,this.rows],this.emit("resize",{terminal:this,cols:t,rows:e})}},r.prototype.updateRange=function(t){t<this.refreshStart&&(this.refreshStart=t),t>this.refreshEnd&&(this.refreshEnd=t)},r.prototype.maxRange=function(){this.refreshStart=0,this.refreshEnd=this.rows-1},r.prototype.setupStops=function(t){for(null!=t?this.tabs[t]||(t=this.prevStop(t)):(this.tabs={},t=0);t<this.cols;t+=8)this.tabs[t]=!0},r.prototype.prevStop=function(t){for(null==t&&(t=this.x);!this.tabs[--t]&&t>0;);return t>=this.cols?this.cols-1:t<0?0:t},r.prototype.nextStop=function(t){for(null==t&&(t=this.x);!this.tabs[++t]&&t<this.cols;);return t>=this.cols?this.cols-1:t<0?0:t},r.prototype.eraseRight=function(t,e){for(var s=this.lines[this.ybase+e],i=[this.eraseAttr()," ",1];t<this.cols;t++)s[t]=i;this.updateRange(e)},r.prototype.eraseLeft=function(t,e){var s=this.lines[this.ybase+e],i=[this.eraseAttr()," ",1];for(t++;t--;)s[t]=i;this.updateRange(e)},r.prototype.clear=function(){if(0!==this.ybase||0!==this.y){this.lines=[this.lines[this.ybase+this.y]],this.ydisp=0,this.ybase=0,this.y=0;for(var t=1;t<this.rows;t++)this.lines.push(this.blankLine());this.refresh(0,this.rows-1),this.emit("scroll",this.ydisp)}},r.prototype.eraseLine=function(t){this.eraseRight(0,t)},r.prototype.blankLine=function(t){for(var e=t?this.eraseAttr():this.defAttr,s=[e," ",1],i=[],r=0;r<this.cols;r++)i[r]=s;return i},r.prototype.ch=function(t){return t?[this.eraseAttr()," ",1]:[this.defAttr," ",1]},r.prototype.is=function(t){var e=this.termName;return 0===(e+"").indexOf(t)},r.prototype.handler=function(t){this.ybase!==this.ydisp&&this.scrollToBottom(),this.emit("data",t)},r.prototype.handleTitle=function(t){this.emit("title",t)},r.prototype.index=function(){this.y++,this.y>this.scrollBottom&&(this.y--,this.scroll()),this.state=g},r.prototype.reverseIndex=function(){var t;this.y--,this.y<this.scrollTop&&(this.y++,this.lines.splice(this.y+this.ybase,0,this.blankLine(!0)),t=this.rows-1-this.scrollBottom,this.lines.splice(this.rows-1+this.ybase-t+1,1),this.updateRange(this.scrollTop),this.updateRange(this.scrollBottom)),this.state=g},r.prototype.reset=function(){this.options.rows=this.rows,this.options.cols=this.cols;var t=this.customKeydownHandler;r.call(this,this.options),this.customKeydownHandler=t,this.refresh(0,this.rows-1),this.viewport.syncScrollArea()},r.prototype.tabSet=function(){this.tabs[this.x]=!0,this.state=g},r.prototype.cursorUp=function(t){var e=t[0];e<1&&(e=1),this.y-=e,this.y<0&&(this.y=0)},r.prototype.cursorDown=function(t){var e=t[0];e<1&&(e=1),this.y+=e,this.y>=this.rows&&(this.y=this.rows-1)},r.prototype.cursorForward=function(t){var e=t[0];e<1&&(e=1),this.x+=e,this.x>=this.cols&&(this.x=this.cols-1)},r.prototype.cursorBackward=function(t){var e=t[0];e<1&&(e=1),this.x-=e,this.x<0&&(this.x=0)},r.prototype.cursorPos=function(t){var e,s;e=t[0]-1,s=t.length>=2?t[1]-1:0,e<0?e=0:e>=this.rows&&(e=this.rows-1),s<0?s=0:s>=this.cols&&(s=this.cols-1),this.x=s,this.y=e},r.prototype.eraseInDisplay=function(t){var e;switch(t[0]){case 0:for(this.eraseRight(this.x,this.y),e=this.y+1;e<this.rows;e++)this.eraseLine(e);break;case 1:for(this.eraseLeft(this.x,this.y),e=this.y;e--;)this.eraseLine(e);break;case 2:for(e=this.rows;e--;)this.eraseLine(e);break;case 3:}},r.prototype.eraseInLine=function(t){switch(t[0]){case 0:this.eraseRight(this.x,this.y);break;case 1:this.eraseLeft(this.x,this.y);break;case 2:this.eraseLine(this.y)}},r.prototype.charAttributes=function(t){if(1===t.length&&0===t[0])return void(this.curAttr=this.defAttr);for(var e,s=t.length,i=0,r=this.curAttr>>18,o=this.curAttr>>9&511,n=511&this.curAttr;i<s;i++)e=t[i],e>=30&&e<=37?o=e-30:e>=40&&e<=47?n=e-40:e>=90&&e<=97?(e+=8,o=e-90):e>=100&&e<=107?(e+=8,n=e-100):0===e?(r=this.defAttr>>18,o=this.defAttr>>9&511,n=511&this.defAttr):1===e?r|=1:4===e?r|=2:5===e?r|=4:7===e?r|=8:8===e?r|=16:22===e?r&=-2:24===e?r&=-3:25===e?r&=-5:27===e?r&=-9:28===e?r&=-17:39===e?o=this.defAttr>>9&511:49===e?n=511&this.defAttr:38===e?2===t[i+1]?(i+=2,o=u(255&t[i],255&t[i+1],255&t[i+2]),o===-1&&(o=511),i+=2):5===t[i+1]&&(i+=2,e=255&t[i],o=e):48===e?2===t[i+1]?(i+=2,n=u(255&t[i],255&t[i+1],255&t[i+2]),n===-1&&(n=511),i+=2):5===t[i+1]&&(i+=2,e=255&t[i],n=e):100===e?(o=this.defAttr>>9&511,n=511&this.defAttr):this.error("Unknown SGR attribute: %d.",e);this.curAttr=r<<18|o<<9|n},r.prototype.deviceStatus=function(t){if(this.prefix){if("?"===this.prefix)switch(t[0]){case 6:this.send("[?"+(this.y+1)+";"+(this.x+1)+"R");break;case 15:break;case 25:break;case 26:break;case 53:}}else switch(t[0]){case 5:this.send("[0n");break;case 6:this.send("["+(this.y+1)+";"+(this.x+1)+"R")}},r.prototype.insertChars=function(t){
var e,s,i,r;for(e=t[0],e<1&&(e=1),s=this.y+this.ybase,i=this.x,r=[this.eraseAttr()," ",1];e--&&i<this.cols;)this.lines[s].splice(i++,0,r),this.lines[s].pop()},r.prototype.cursorNextLine=function(t){var e=t[0];e<1&&(e=1),this.y+=e,this.y>=this.rows&&(this.y=this.rows-1),this.x=0},r.prototype.cursorPrecedingLine=function(t){var e=t[0];e<1&&(e=1),this.y-=e,this.y<0&&(this.y=0),this.x=0},r.prototype.cursorCharAbsolute=function(t){var e=t[0];e<1&&(e=1),this.x=e-1},r.prototype.insertLines=function(t){var e,s,i;for(e=t[0],e<1&&(e=1),s=this.y+this.ybase,i=this.rows-1-this.scrollBottom,i=this.rows-1+this.ybase-i+1;e--;)this.lines.splice(s,0,this.blankLine(!0)),this.lines.splice(i,1);this.updateRange(this.y),this.updateRange(this.scrollBottom)},r.prototype.deleteLines=function(t){var e,s,i;for(e=t[0],e<1&&(e=1),s=this.y+this.ybase,i=this.rows-1-this.scrollBottom,i=this.rows-1+this.ybase-i;e--;)this.lines.splice(i+1,0,this.blankLine(!0)),this.lines.splice(s,1);this.updateRange(this.y),this.updateRange(this.scrollBottom)},r.prototype.deleteChars=function(t){var e,s,i;for(e=t[0],e<1&&(e=1),s=this.y+this.ybase,i=[this.eraseAttr()," ",1];e--;)this.lines[s].splice(this.x,1),this.lines[s].push(i)},r.prototype.eraseChars=function(t){var e,s,i,r;for(e=t[0],e<1&&(e=1),s=this.y+this.ybase,i=this.x,r=[this.eraseAttr()," ",1];e--&&i<this.cols;)this.lines[s][i++]=r},r.prototype.charPosAbsolute=function(t){var e=t[0];e<1&&(e=1),this.x=e-1,this.x>=this.cols&&(this.x=this.cols-1)},r.prototype.HPositionRelative=function(t){var e=t[0];e<1&&(e=1),this.x+=e,this.x>=this.cols&&(this.x=this.cols-1)},r.prototype.sendDeviceAttributes=function(t){t[0]>0||(this.prefix?">"===this.prefix&&(this.is("xterm")?this.send("[>0;276;0c"):this.is("rxvt-unicode")?this.send("[>85;95;0c"):this.is("linux")?this.send(t[0]+"c"):this.is("screen")&&this.send("[>83;40003;0c")):this.is("xterm")||this.is("rxvt-unicode")||this.is("screen")?this.send("[?1;2c"):this.is("linux")&&this.send("[?6c"))},r.prototype.linePosAbsolute=function(t){var e=t[0];e<1&&(e=1),this.y=e-1,this.y>=this.rows&&(this.y=this.rows-1)},r.prototype.VPositionRelative=function(t){var e=t[0];e<1&&(e=1),this.y+=e,this.y>=this.rows&&(this.y=this.rows-1)},r.prototype.HVPosition=function(t){t[0]<1&&(t[0]=1),t[1]<1&&(t[1]=1),this.y=t[0]-1,this.y>=this.rows&&(this.y=this.rows-1),this.x=t[1]-1,this.x>=this.cols&&(this.x=this.cols-1)},r.prototype.setMode=function(t){if("object"!=typeof t)if(this.prefix){if("?"===this.prefix)switch(t){case 1:this.applicationCursor=!0;break;case 2:this.setgCharset(0,r.charsets.US),this.setgCharset(1,r.charsets.US),this.setgCharset(2,r.charsets.US),this.setgCharset(3,r.charsets.US);break;case 3:this.savedCols=this.cols,this.resize(132,this.rows);break;case 6:this.originMode=!0;break;case 7:this.wraparoundMode=!0;break;case 12:break;case 66:this.log("Serial port requested application keypad."),this.applicationKeypad=!0,this.viewport.syncScrollArea();break;case 9:case 1e3:case 1002:case 1003:this.x10Mouse=9===t,this.vt200Mouse=1e3===t,this.normalMouse=t>1e3,this.mouseEvents=!0,this.element.style.cursor="default",this.log("Binding to mouse events.");break;case 1004:this.sendFocus=!0;break;case 1005:this.utfMouse=!0;break;case 1006:this.sgrMouse=!0;break;case 1015:this.urxvtMouse=!0;break;case 25:this.cursorHidden=!1;break;case 1049:case 47:case 1047:if(!this.normal){var e={lines:this.lines,ybase:this.ybase,ydisp:this.ydisp,x:this.x,y:this.y,scrollTop:this.scrollTop,scrollBottom:this.scrollBottom,tabs:this.tabs};this.reset(),this.normal=e,this.showCursor()}}}else switch(t){case 4:this.insertMode=!0;break;case 20:}else for(var s=t.length,i=0;i<s;i++)this.setMode(t[i])},r.prototype.resetMode=function(t){if("object"!=typeof t)if(this.prefix){if("?"===this.prefix)switch(t){case 1:this.applicationCursor=!1;break;case 3:132===this.cols&&this.savedCols&&this.resize(this.savedCols,this.rows),delete this.savedCols;break;case 6:this.originMode=!1;break;case 7:this.wraparoundMode=!1;break;case 12:break;case 66:this.log("Switching back to normal keypad."),this.applicationKeypad=!1,this.viewport.syncScrollArea();break;case 9:case 1e3:case 1002:case 1003:this.x10Mouse=!1,this.vt200Mouse=!1,this.normalMouse=!1,this.mouseEvents=!1,this.element.style.cursor="";break;case 1004:this.sendFocus=!1;break;case 1005:this.utfMouse=!1;break;case 1006:this.sgrMouse=!1;break;case 1015:this.urxvtMouse=!1;break;case 25:this.cursorHidden=!0;break;case 1049:case 47:case 1047:this.normal&&(this.lines=this.normal.lines,this.ybase=this.normal.ybase,this.ydisp=this.normal.ydisp,this.x=this.normal.x,this.y=this.normal.y,this.scrollTop=this.normal.scrollTop,this.scrollBottom=this.normal.scrollBottom,this.tabs=this.normal.tabs,this.normal=null,this.refresh(0,this.rows-1),this.showCursor())}}else switch(t){case 4:this.insertMode=!1;break;case 20:}else for(var e=t.length,s=0;s<e;s++)this.resetMode(t[s])},r.prototype.setScrollRegion=function(t){this.prefix||(this.scrollTop=(t[0]||1)-1,this.scrollBottom=(t[1]||this.rows)-1,this.x=0,this.y=0)},r.prototype.saveCursor=function(t){this.savedX=this.x,this.savedY=this.y},r.prototype.restoreCursor=function(t){this.x=this.savedX||0,this.y=this.savedY||0},r.prototype.cursorForwardTab=function(t){for(var e=t[0]||1;e--;)this.x=this.nextStop()},r.prototype.scrollUp=function(t){for(var e=t[0]||1;e--;)this.lines.splice(this.ybase+this.scrollTop,1),this.lines.splice(this.ybase+this.scrollBottom,0,this.blankLine());this.updateRange(this.scrollTop),this.updateRange(this.scrollBottom)},r.prototype.scrollDown=function(t){for(var e=t[0]||1;e--;)this.lines.splice(this.ybase+this.scrollBottom,1),this.lines.splice(this.ybase+this.scrollTop,0,this.blankLine());this.updateRange(this.scrollTop),this.updateRange(this.scrollBottom)},r.prototype.initMouseTracking=function(t){},r.prototype.resetTitleModes=function(t){},r.prototype.cursorBackwardTab=function(t){for(var e=t[0]||1;e--;)this.x=this.prevStop()},r.prototype.repeatPrecedingCharacter=function(t){for(var e=t[0]||1,s=this.lines[this.ybase+this.y],i=s[this.x-1]||[this.defAttr," ",1];e--;)s[this.x++]=i},r.prototype.tabClear=function(t){var e=t[0];e<=0?delete this.tabs[this.x]:3===e&&(this.tabs={})},r.prototype.mediaCopy=function(t){},r.prototype.setResources=function(t){},r.prototype.disableModifiers=function(t){},r.prototype.setPointerMode=function(t){},r.prototype.softReset=function(t){this.cursorHidden=!1,this.insertMode=!1,this.originMode=!1,this.wraparoundMode=!1,this.applicationKeypad=!1,this.viewport.syncScrollArea(),this.applicationCursor=!1,this.scrollTop=0,this.scrollBottom=this.rows-1,this.curAttr=this.defAttr,this.x=this.y=0,this.charset=null,this.glevel=0,this.charsets=[null]},r.prototype.requestAnsiMode=function(t){},r.prototype.requestPrivateMode=function(t){},r.prototype.setConformanceLevel=function(t){},r.prototype.loadLEDs=function(t){},r.prototype.setCursorStyle=function(t){},r.prototype.setCharProtectionAttr=function(t){},r.prototype.restorePrivateValues=function(t){},r.prototype.setAttrInRectangle=function(t){for(var e,s,i=t[0],r=t[1],o=t[2],n=t[3],a=t[4];i<o+1;i++)for(e=this.lines[this.ybase+i],s=r;s<n;s++)e[s]=[a,e[s][1]];this.updateRange(t[0]),this.updateRange(t[2])},r.prototype.fillRectangle=function(t){for(var e,s,i=t[0],r=t[1],o=t[2],n=t[3],a=t[4];r<n+1;r++)for(e=this.lines[this.ybase+r],s=o;s<a;s++)e[s]=[e[s][0],String.fromCharCode(i)];this.updateRange(t[1]),this.updateRange(t[3])},r.prototype.enableLocatorReporting=function(t){t[0]>0},r.prototype.eraseRectangle=function(t){var e,s,i,r=t[0],o=t[1],n=t[2],a=t[3];for(i=[this.eraseAttr()," ",1];r<n+1;r++)for(e=this.lines[this.ybase+r],s=o;s<a;s++)e[s]=i;this.updateRange(t[0]),this.updateRange(t[2])},r.prototype.insertColumns=function(){for(var t,e=params[0],s=this.ybase+this.rows,i=[this.eraseAttr()," ",1];e--;)for(t=this.ybase;t<s;t++)this.lines[t].splice(this.x+1,0,i),this.lines[t].pop();this.maxRange()},r.prototype.deleteColumns=function(){for(var t,e=params[0],s=this.ybase+this.rows,i=[this.eraseAttr()," ",1];e--;)for(t=this.ybase;t<s;t++)this.lines[t].splice(this.x,1),this.lines[t].push(i);this.maxRange()},r.charsets={},r.charsets.SCLD={"`":"◆",a:"▒",b:"\t",c:"\f",d:"\r",e:"\n",f:"°",g:"±",h:"␤",i:"\v",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"},r.charsets.UK=null,r.charsets.US=null,r.charsets.Dutch=null,r.charsets.Finnish=null,r.charsets.French=null,r.charsets.FrenchCanadian=null,r.charsets.German=null,r.charsets.Italian=null,r.charsets.NorwegianDanish=null,r.charsets.Spanish=null,r.charsets.Swedish=null,r.charsets.Swiss=null,r.charsets.ISOLatin=null,u._cache={},u.distance=function(t,e,s,i,r,o){return Math.pow(30*(t-i),2)+Math.pow(59*(e-r),2)+Math.pow(11*(s-o),2)};var M=function(t){function e(t){var e,s=0,r=i.length-1;if(t<i[0][0]||t>i[r][1])return!1;for(;r>=s;)if(e=Math.floor((s+r)/2),t>i[e][1])s=e+1;else{if(!(t<i[e][0]))return!0;r=e-1}return!1}function s(s){return 0===s?t.nul:s<32||s>=127&&s<160?t.control:e(s)?0:1+(s>=4352&&(s<=4447||9001==s||9002==s||s>=11904&&s<=42191&&12351!=s||s>=44032&&s<=55203||s>=63744&&s<=64255||s>=65040&&s<=65049||s>=65072&&s<=65135||s>=65280&&s<=65376||s>=65504&&s<=65510||s>=131072&&s<=196605||s>=196608&&s<=262141))}var i=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531],[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];return s}({nul:0,control:0});r.EventEmitter=y.EventEmitter,r.inherits=h,r.on=o,r.off=n,r.cancel=a,s.exports=r},{"./CompositionHelper.js":1,"./EventEmitter.js":2,"./Viewport.js":3,"./handlers/Clipboard.js":4,"./utils/Browser":5}]},{},[7])(7)})},function(t,e,s){(function(e){"use strict";function i(t){this.enabled=t&&void 0!==t.enabled?t.enabled:u}function r(t){var e=function(){return o.apply(e,arguments)};return e._styles=t,e.enabled=this.enabled,e.__proto__=y,e}function o(){var t=arguments,e=t.length,s=0!==e&&String(arguments[0]);if(e>1)for(var i=1;i<e;i++)s+=" "+t[i];if(!this.enabled||!s)return s;var r=this._styles,o=r.length,n=h.dim.open;for(!f||r.indexOf("gray")===-1&&r.indexOf("grey")===-1||(h.dim.open="");o--;){var a=h[r[o]];s=a.open+s.replace(a.closeRe,a.open)+a.close}return h.dim.open=n,s}function n(){var t={};return Object.keys(d).forEach(function(e){t[e]={get:function(){return r.call(this,[e])}}}),t}var a=s(5),h=s(6),c=s(8),l=s(10),u=s(11),p=Object.defineProperties,f="win32"===e.platform&&!/^xterm/i.test(e.env.TERM);f&&(h.blue.open="[94m");var d=function(){var t={};return Object.keys(h).forEach(function(e){h[e].closeRe=new RegExp(a(h[e].close),"g"),t[e]={get:function(){return r.call(this,this._styles.concat(e))}}}),t}(),y=p(function(){},d);p(i.prototype,n()),t.exports=new i,t.exports.styles=h,t.exports.hasColor=l,t.exports.stripColor=c,t.exports.supportsColor=u}).call(e,s(4))},function(t,e){function s(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(t){if(l===setTimeout)return setTimeout(t,0);if((l===s||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function o(t){if(u===clearTimeout)return clearTimeout(t);if((u===i||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(t);try{return u(t)}catch(e){try{return u.call(null,t)}catch(e){return u.call(this,t)}}}function n(){y&&f&&(y=!1,f.length?d=f.concat(d):m=-1,d.length&&a())}function a(){if(!y){var t=r(n);y=!0;for(var e=d.length;e;){for(f=d,d=[];++m<e;)f&&f[m].run();m=-1,e=d.length}f=null,y=!1,o(t)}}function h(t,e){this.fun=t,this.array=e}function c(){}var l,u,p=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:s}catch(t){l=s}try{u="function"==typeof clearTimeout?clearTimeout:i}catch(t){u=i}}();var f,d=[],y=!1,m=-1;p.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)e[s-1]=arguments[s];d.push(new h(t,e)),1!==d.length||y||r(a)},h.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=c,p.addListener=c,p.once=c,p.off=c,p.removeListener=c,p.removeAllListeners=c,p.emit=c,p.binding=function(t){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(t){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(t,e){"use strict";var s=/[|\\{}()[\]^$+*?.]/g;t.exports=function(t){if("string"!=typeof t)throw new TypeError("Expected a string");return t.replace(s,"\\$&")}},function(t,e,s){(function(t){"use strict";function e(){var t={modifiers:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},colors:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39]},bgColors:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49]}};return t.colors.grey=t.colors.gray,Object.keys(t).forEach(function(e){var s=t[e];Object.keys(s).forEach(function(e){var i=s[e];t[e]=s[e]={open:"["+i[0]+"m",close:"["+i[1]+"m"}}),Object.defineProperty(t,e,{value:s,enumerable:!1})}),t}Object.defineProperty(t,"exports",{enumerable:!0,get:e})}).call(e,s(7)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e,s){"use strict";var i=s(9)();t.exports=function(t){return"string"==typeof t?t.replace(i,""):t}},function(t,e){"use strict";t.exports=function(){return/[\u001b\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-ORZcf-nqry=><]/g}},function(t,e,s){"use strict";var i=s(9),r=new RegExp(i().source);t.exports=r.test.bind(r)},function(t,e,s){(function(e){"use strict";var s=e.argv,i=s.indexOf("--"),r=function(t){t="--"+t;var e=s.indexOf(t);return e!==-1&&(i===-1||e<i)};t.exports=function(){return"FORCE_COLOR"in e.env||!(r("no-color")||r("no-colors")||r("color=false"))&&(!!(r("color")||r("colors")||r("color=true")||r("color=always"))||!(e.stdout&&!e.stdout.isTTY)&&("win32"===e.platform||("COLORTERM"in e.env||"dumb"!==e.env.TERM&&!!/^screen|^xterm|^vt100|color|ansi|cygwin|linux/i.test(e.env.TERM))))}()}).call(e,s(4))},function(t,e,s){var i=s(13),r={HOME:"/home/website",PATH:"/bin:/sbin:/usr/bin:/usr/sbin",PWD:"/home/website",SHLVL:"1",TERM:"xterm",USER:"website"},o=r.PWD;t.exports={getenv:function(){return r},getcwd:function(){return o},chdir:function(t){if("directory"!==i.stat(t).type)throw new Error(t+": Not a directory");r.PWD=o=t},exec:function(){if("executable"!==i.stat(arguments[0]).type)throw new Error(arguments[0]+" is not an Executable");i.read(arguments[0]).main.apply(void 0,arguments)}}},function(t,e,s){var i={};window.filesystem=i;var r={DIRECTORY:s(14),EXECUTABLE:s(15),FILE:s(16)};t.exports={stat:function(t){var e={type:null};return i.hasOwnProperty(t)?i[t]instanceof r.DIRECTORY?(e.type="directory",e):i[t]instanceof r.EXECUTABLE?(e.type="executable",e):i[t]instanceof r.FILE?(e.type="file",e):void 0:e},write:function(t,e){i[t]=e},read:function(t){if(["file","executable"].indexOf(this.stat(t).type)!==-1)return i[t];throw new Error(t+": No such file or directory")},scan:function(t){t="/"===t.charAt(t.length-1)?t:t+"/";var e=new RegExp("^"+t+"[^/]+?$"),s=[];return Object.keys(i).forEach(function(t){t.match(e)&&s.push(t)}),s}}},function(t,e){t.exports=function(t){}},function(t,e){t.exports=function(t){Object.defineProperty(this,"main",{value:t.main})}},function(t,e){t.exports=function(t){Object.defineProperty(this,"contents",{value:t.contents})}},function(t,e,s){var i=s(14),r=s(16),o=s(13);t.exports=function(){o.write("/",new i),o.write("/bin",new i),o.write("/etc",new i),o.write("/home",new i),o.write("/home/website",new i),o.write("/sbin",new i),o.write("/usr",new i),o.write("/usr/bin",new i),o.write("/var",new i),o.write("/bin/cat",s(18)),o.write("/usr/bin/cd",s(20)),o.write("/bin/ls",s(21)),o.write("/bin/pwd",s(22)),o.write("/bin/motd",s(23)),o.write("/bin/mkdir",s(22)),o.write("/bin/sh",s(24)),o.write("/etc/motd",new r({contents:s(28)})),o.write("/home/website/help.txt",new r({contents:s(29)}))}},function(t,e,s){var i=s(15),r=s(19);t.exports=new i({main:function(){var t=s(1),e=s(12),i=s(13),o=r.resolve(e.getcwd(),arguments[1]),n=i.read(o),a=i.stat(o).type,h=[];switch(a){case"file":h=n.contents.split("\n");break;case"executable":h=n.main.toString().split("\n")}h.forEach(function(e){t.writeln(e)})}})},function(t,e,s){(function(t){function s(t,e){for(var s=0,i=t.length-1;i>=0;i--){var r=t[i];"."===r?t.splice(i,1):".."===r?(t.splice(i,1),s++):s&&(t.splice(i,1),s--)}if(e)for(;s--;s)t.unshift("..");return t}function i(t,e){if(t.filter)return t.filter(e);for(var s=[],i=0;i<t.length;i++)e(t[i],i,t)&&s.push(t[i]);return s}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(t){return r.exec(t).slice(1)};e.resolve=function(){for(var e="",r=!1,o=arguments.length-1;o>=-1&&!r;o--){var n=o>=0?arguments[o]:t.cwd();if("string"!=typeof n)throw new TypeError("Arguments to path.resolve must be strings");n&&(e=n+"/"+e,r="/"===n.charAt(0))}return e=s(i(e.split("/"),function(t){return!!t}),!r).join("/"),(r?"/":"")+e||"."},e.normalize=function(t){var r=e.isAbsolute(t),o="/"===n(t,-1);return t=s(i(t.split("/"),function(t){return!!t}),!r).join("/"),t||r||(t="."),t&&o&&(t+="/"),(r?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(i(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},e.relative=function(t,s){function i(t){for(var e=0;e<t.length&&""===t[e];e++);for(var s=t.length-1;s>=0&&""===t[s];s--);return e>s?[]:t.slice(e,s-e+1)}t=e.resolve(t).substr(1),s=e.resolve(s).substr(1);for(var r=i(t.split("/")),o=i(s.split("/")),n=Math.min(r.length,o.length),a=n,h=0;h<n;h++)if(r[h]!==o[h]){a=h;break}for(var c=[],h=a;h<r.length;h++)c.push("..");return c=c.concat(o.slice(a)),c.join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){var e=o(t),s=e[0],i=e[1];return s||i?(i&&(i=i.substr(0,i.length-1)),s+i):"."},e.basename=function(t,e){var s=o(t)[2];return e&&s.substr(-1*e.length)===e&&(s=s.substr(0,s.length-e.length)),s},e.extname=function(t){return o(t)[3]};var n="b"==="ab".substr(-1)?function(t,e,s){return t.substr(e,s)}:function(t,e,s){return e<0&&(e=t.length+e),t.substr(e,s)}}).call(e,s(4))},function(t,e,s){var i=s(15),r=s(19),o=s(3);t.exports=new i({main:function(){var t=s(1),e=s(12),i=function(){},n=arguments[1];n||(i=function(){e.chdir(e.getenv().HOME)}),n&&(i=function(){e.chdir(r.resolve(e.getcwd(),n))});try{i()}catch(e){t.writeln(o.red(e))}}})},function(t,e,s){var i=s(15),r=s(3),o=s(19);t.exports=new i({main:function(){for(var t=s(1),e=s(13),i=s(12),n=arguments[1]||i.getcwd(),a=e.scan(n),h=0;h<a.length;h++){var c=e.stat(a[h]).type;switch(a[h]=o.basename(a[h]),c){case"directory":a[h]=r.blue(a[h]);break;case"executable":a[h]=r.red(a[h])}}t.writeln(a.join("\t"))}})},function(t,e,s){var i=s(15);t.exports=new i({main:function(){var t=s(1),e=s(12);t.writeln(e.getcwd())}})},function(t,e,s){var i=s(15),r=s(1);t.exports=new i({main:function(){r.writeln("    Welcome to KeithOS!    "),r.writeln("===========================")}})},function(t,e,s){var i=s(15);t.exports=new i({main:function(){var t=s(25);t()}})},function(t,e,s){var i=s(1),r=s(12),o=s(13),n=s(3),a=s(19),h=s(26);t.exports=function(){var t=function(t){for(var e=r.getenv().PATH.split(":"),s=0;s<e.length;s++){var i=a.resolve(e[s],t);if("executable"===o.stat(i).type)return i}throw new Error(t+": command not found")},e=function(s){if(""===s)return h.prompt(e);s=s.split(" ");try{s[0]=t(s[0]),r.exec.apply(void 0,s)}catch(t){i.writeln(n.red(t))}h.prompt(e)};h.prompt(e)}},function(t,e,s){var i=s(1),r=s(12),o=s(3),n=s(27);t.exports={prompt:function(t){var e={contents:"",cursor:0},s={left:function(){e.cursor=Math.max(0,e.cursor-1),a()},right:function(){e.cursor=Math.min(e.contents.length,e.cursor+1),a()},home:function(){e.cursor=0,a()},end:function(){e.cursor=e.contents.length,a()}},a=function(){i.x=0,i.eraseLine(i.y),i.write(l()+e.contents),i.x=o.stripColor(l()).length+e.cursor,i.refresh(i.y+i.ybase,i.y+i.ybase+1,!1)},h=function(t){var s=e.contents.split(""),i=t.split("");Array.prototype.splice.apply(s,[e.cursor,0].concat(i)),e.contents=s.join(""),e.cursor+=i.length,a()},c=function(){var t=e.contents.split("");t.splice(e.cursor-1,1),e.contents=t.join(""),e.cursor=Math.max(0,e.cursor-1),a()},l=function(){var t=r.getcwd(),e=new RegExp("^"+r.getenv().HOME);return t=t.replace(e,"~"),o.blue(t+" $ ")},u=function(t){for(var r=[],o=0;o<t.length;o++)r.push(t.codePointAt(o));if(27===r[0]&&91===r[1])switch(r[2]){case 67:s.right();break;case 68:s.left();break;case 70:s.end();break;case 72:s.home()}if(!(r[0]<32))return 127===r[0]?c():void h(t);switch(r[0]){case 1:s.home();break;case 2:s.left();break;case 5:s.end();break;case 6:s.right();break;case 7:i.bell();break;case 9:n(e,function(t,e){if(t)throw t;h(e)});break;case 13:p()}},p=function(){i.writeln(""),i.off("data",u),t(e.contents)};i.on("data",u),a()}}},function(t,e,s){var i=s(12),r=s(13),o=s(19);t.exports=function(t,e){var s=function(){for(var e=t.contents.trim(),s=[],i=t.cursor-1;i>=0&&" "!==e[i];i--)s.unshift(e[i]);return s.join("")},n=function(){var e=t.contents.trim();return e.indexOf(" ")===-1||t.cursor-1<e.indexOf(" ")},a=function(t){var e=i.getenv().PATH.split(":"),s=[];return e.forEach(function(e){var i=r.scan(e);i.forEach(function(e){"executable"===r.stat(e).type&&0===o.basename(e).indexOf(t)&&s.push(o.basename(e))})}),1===s.length?s[0]:""},h=function(t){var e=[],s=o.resolve(i.getcwd(),t),n="";n="directory"===r.stat(s).type?s:o.dirname(s);var a=r.scan(n);return a.forEach(function(t){0===t.indexOf(s)&&("directory"===r.stat(t).type&&(t+="/"),e.push(t))}),1===e.length?"directory"===r.stat(e[0]).type?o.basename(e[0])+"/":o.basename(e[0]):""},c=function(t,e){return e.replace(new RegExp("^"+o.basename(t)),"")},l=s(),u=n()?a(l):h(l);e(null,c(l,u))}},function(t,e){t.exports="#\n# Welcome to KeithOS!\n# v0.0.1 - codename: itBarelyWorks\n#\n# (Lost? Type `cat help.txt` and press enter)\n#\n"},function(t,e){t.exports="# What am I looking at?\n\nThis whole website simulates a Linux shell environment. You do things by typing\nthe name of a command, optionally adding extra information (called arguments),\nthen pressing enter to see the command’s output.\n"}]);